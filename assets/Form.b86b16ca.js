import{p as e,h as a,r as t,o as l,c as i,a as s,x as u,t as r,n as o,i as d,b as n}from"./vendor.2e375d5a.js";const c=d();e("data-v-016b1fbe");const m={id:"Form"},p={key:0,class:"firstStep"},_=s("h3",null,"找到你要製作的音樂:",-1),g={key:0,class:"youtubeCard marginTop"},b={class:"image"},h={class:"marginTop"},f={class:"marginTop"},v={class:"marginTop"},y=n("確認"),V=s("h3",null,"輸入你的音樂資訊:",-1),T=n("極慢"),k=n("慢"),x=n("正常"),w=n("快"),I=n("極快"),C=n("確認"),F=n("重寫"),D=n("上一步"),S={key:2,class:"thirdStep"},U=s("h3",null,"最後一步",-1),j=s("h3",null,"最後一步",-1),Y=s("h3",null,"最後一步",-1),q=s("h3",null,"最後一步",-1),N=s("h3",null,"最後一步",-1),$=s("h3",null,"最後一步",-1),A=s("h3",null,"最後一步",-1),E=s("h3",null,"最後一步",-1),K=s("h3",null,"最後一步",-1),P=s("h3",null,"最後一步",-1),B=n("確認"),H=n("上一步");a();const M=c(((e,a,d,n,M,O)=>{const z=t("el-header"),G=t("el-button"),J=t("el-input"),L=t("el-col"),Q=t("el-row"),R=t("el-card"),W=t("el-skeleton"),X=t("el-form-item"),Z=t("el-radio-button"),ee=t("el-radio-group"),ae=t("el-form"),te=t("el-main"),le=t("el-step"),ie=t("el-steps");return l(),i("div",m,[s(z),s(te,null,{default:c((()=>[0==M.active?(l(),i("div",p,[_,s(J,{class:"marginTop",modelValue:M.searchValue,"onUpdate:modelValue":a[2]||(a[2]=e=>M.searchValue=e),placeholder:"請輸入youtube網址",onKeyup:a[3]||(a[3]=u((e=>O.search(M.searchValue)),["enter"]))},{append:c((()=>[s(G,{onClick:a[1]||(a[1]=e=>O.search(M.searchValue)),icon:"el-icon-search",circle:""})])),_:1},8,["modelValue"]),M.music_data.youtube_id.length>0?(l(),i("div",g,[s(Q,{justify:"cetnter"},{default:c((()=>[s(L,null,{default:c((()=>[s(R,{shadow:"hover","body-style":{padding:"8px"}},{default:c((()=>[s(Q,{justify:"space-around",gutter:8},{default:c((()=>[s(L,{span:24,sm:6,lg:4},{default:c((()=>[s("div",b,[s("img",{src:M.music_data.img_src},null,8,["src"])])])),_:1}),s(L,{span:24,sm:18,lg:20},{default:c((()=>[s("h4",h,"歌名: "+r(M.music_data.origin_song),1),s("h4",f,"頻道: "+r(M.music_data.producer),1),s("h4",v,"時間: "+r(O.getTimeString),1)])),_:1})])),_:1})])),_:1})])),_:1}),s(L,null,{default:c((()=>[s(G,{class:"marginTop",type:"primary",onClick:a[4]||(a[4]=e=>O.next())},{default:c((()=>[y])),_:1})])),_:1})])),_:1})])):(l(),i(W,{key:1,class:"marginTop",rows:5,animated:""}))])):o("",!0),1==M.active?(l(),i(ae,{key:1,class:"secondStep",model:M.music_data,rules:M.rules,ref:"map_data","label-width":"100px"},{default:c((()=>[V,s(X,{class:"marginTop",label:"標題",prop:"title"},{default:c((()=>[s(J,{modelValue:M.music_data.title,"onUpdate:modelValue":a[5]||(a[5]=e=>M.music_data.title=e)},null,8,["modelValue"])])),_:1}),s(X,{label:"作者",prop:"mapper"},{default:c((()=>[s(J,{modelValue:M.music_data.mapper,"onUpdate:modelValue":a[6]||(a[6]=e=>M.music_data.mapper=e)},null,8,["modelValue"])])),_:1}),s(X,{label:"節奏速度",prop:"bpm"},{default:c((()=>[s(ee,{modelValue:M.music_data.bpm,"onUpdate:modelValue":a[7]||(a[7]=e=>M.music_data.bpm=e)},{default:c((()=>[s(Z,{label:.25},{default:c((()=>[T])),_:1},8,["label"]),s(Z,{label:.5},{default:c((()=>[k])),_:1},8,["label"]),s(Z,{label:1},{default:c((()=>[x])),_:1}),s(Z,{label:1.5},{default:c((()=>[w])),_:1},8,["label"]),s(Z,{label:2},{default:c((()=>[I])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(X,null,{default:c((()=>[s(G,{type:"primary",onClick:a[8]||(a[8]=e=>O.submitForm("map_data"))},{default:c((()=>[C])),_:1}),s(G,{onClick:a[9]||(a[9]=e=>O.resetForm("map_data"))},{default:c((()=>[F])),_:1}),s(G,{type:"danger",onClick:a[10]||(a[10]=e=>O.previous())},{default:c((()=>[D])),_:1})])),_:1})])),_:1},8,["model","rules"])):o("",!0),2==M.active?(l(),i("div",S,[U,j,Y,q,N,$,A,E,K,P,s(G,{type:"primary",onClick:a[11]||(a[11]=e=>O.submitForm("map_data"))},{default:c((()=>[B])),_:1}),s(G,{type:"danger",onClick:a[12]||(a[12]=e=>O.previous())},{default:c((()=>[H])),_:1})])):o("",!0)])),_:1}),s(ie,{active:M.active,"align-center":"","finish-status":"success"},{default:c((()=>[s(le,{title:"找到Youtube音樂"}),s(le,{title:"輸入你的歌曲資訊"}),s(le,{title:"編輯預設個人設定"})])),_:1},8,["active"])])}));const O={data:()=>({active:0,searchValue:"",music_data:{title:"",mapper:"",bpm:null,duration:0,difficulty:1.5,origin_song:"",youtube_id:"",video_url:"",img_src:"",producer:"",love_count:0,play_count:0,view_count:0},rules:{title:[{required:!0,message:"請輸入標題",trigger:"blur"},{min:1,max:30,message:"長度請控制在30個字以內",trigger:"blur"}],mapper:[{required:!0,message:"作者不能為空",trigger:"blur"},{min:1,max:30,message:"長度請控制在30個字以內",trigger:"blur"}],bpm:[{required:!0,message:"請選擇速度",trigger:"blur"}]}}),computed:{getTimeString(){let e=parseInt(this.music_data.duration/60),a=parseInt(this.music_data.duration%60);return a<10&&(a="0"+a),e+"分"+a+"秒"}},methods:{search(e){console.log("object"),this.getInfo(this.getYoutubeID(e)),this.searchValue=""},getYoutubeID:e=>e.split("?v=")[1],getDuration(e){var a=/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/,t=0,l=0,i=0;if(a.exec(e)){var s=a.exec(e);return s[1]&&(t=Number(s[1])),s[2]&&(l=Number(s[2])),s[3]&&(i=Number(s[3])),3600*t+60*l+i}},getInfo(e){const a=window.gapi.client.youtube.videos.list({part:["snippet,contentDetails,statistics"],id:e}),t=this;a.execute((function(e){console.log(e),e.items.map((e=>{try{e.id.playlistId||(t.music_data.youtube_id=e.id,t.music_data.origin_song=e.snippet.title,t.music_data.producer=e.snippet.channelTitle,t.music_data.duration=t.getDuration(e.contentDetails.duration),t.music_data.video_url="https://www.youtube.com/embed/"+e.id,t.music_data.img_src="http://img.youtube.com/vi/"+e.id+"/0.jpg")}catch(a){console.log(a)}}))}))},submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;this.next(),console.log(this.music_data)}))},resetForm(e){this.$refs[e].resetFields()},next(){this.active++},previous(){this.active--}},mounted(){gapi.client.load("youtube","v3"),gapi.client.setApiKey({}.VITE_YOUTUBE_API)}};O.render=M,O.__scopeId="data-v-016b1fbe";export{O as default};
