import{r as e,o as t,c as a,a as o,w as i,b as s,d as l,e as r,f as d,p as n,g as c,h as m,i as u,j as p,t as h,F as y,k as g,l as b,m as f,n as v,V as k,q as _,s as S,u as T}from"./vendor.edb56429.js";const w={id:"App"},C={id:"Nav"},D=s("Home"),L=s("Edit"),B=s("Play"),E=s("Form");const P={};let j;P.render=function(s,l){const r=e("el-menu-item"),d=e("el-menu"),n=e("router-view");return t(),a("div",w,[o("div",C,[o(d,{class:"el-menu-demo",mode:"horizontal",router:!0},{default:i((()=>[o(r,{index:"/"},{default:i((()=>[D])),_:1}),o(r,{index:"edit"},{default:i((()=>[L])),_:1}),o(r,{index:"play"},{default:i((()=>[B])),_:1}),o(r,{index:"form"},{default:i((()=>[E])),_:1})])),_:1})]),o(n)])};const V={},x=function(e,t){if(!t||0===t.length)return e();if(void 0===j){const e=document.createElement("link").relList;j=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`./${e}`)in V)return;V[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":j,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))},I=[{path:"/",name:"Home",component:()=>x((()=>import("./Home.31076caa.js")),["assets/Home.31076caa.js","assets/vendor.edb56429.js"])},{path:"/edit",name:"Edit",component:()=>x((()=>import("./Edit.030ccdb1.js")),["assets/Edit.030ccdb1.js","assets/Edit.021928d1.css","assets/vendor.edb56429.js"])},{path:"/play",name:"Play",component:()=>x((()=>import("./Play.18c0b8e2.js")),["assets/Play.18c0b8e2.js","assets/Play.355840be.css","assets/vendor.edb56429.js"])},{path:"/form",name:"Form",component:()=>x((()=>import("./Form.04d1d71c.js")),["assets/Form.04d1d71c.js","assets/Form.bfef2c02.css","assets/vendor.edb56429.js"])}],M=l({history:r("#"),routes:I});var $=d({state:{user:{name:"Gary",id:0},setting:{bpm:1,viewDegree:15,mapSetting:[[{key:"a",color:"#cd004b",audio:"pianoC"}],[{key:"a",color:"#cd004b",audio:"pianoC"},{key:"d",color:"#fcb711",audio:"pianoE"}],[{key:"a",color:"#cd004b",audio:"pianoC"},{key:"s",color:"#f37023",audio:"pianoD"},{key:"d",color:"#fcb711",audio:"pianoE"}],[{key:"a",color:"#cd004b",audio:"pianoC"},{key:"s",color:"#f37023",audio:"pianoD"},{key:"5",color:"#6561ac",audio:"pianoA"},{key:"6",color:"#292526",audio:"pianoB"}],[{key:"a",color:"#cd004b",audio:"pianoC"},{key:"s",color:"#f37023",audio:"pianoD"},{key:"4",color:"#0087d2",audio:"pianoG"},{key:"5",color:"#6561ac",audio:"pianoA"},{key:"6",color:"#292526",audio:"pianoB"}],[{key:"a",color:"#cd004b",audio:"pianoC"},{key:"s",color:"#f37023",audio:"pianoD"},{key:"d",color:"#fcb711",audio:"pianoE"},{key:"4",color:"#0087d2",audio:"pianoG"},{key:"5",color:"#6561ac",audio:"pianoA"},{key:"6",color:"#292526",audio:"pianoB"}],[{key:"a",color:"#cd004b",audio:"pianoC"},{key:"s",color:"#f37023",audio:"pianoD"},{key:"d",color:"#fcb711",audio:"pianoE"},{key:"f",color:"#0eb24e",audio:"pianoF"},{key:"4",color:"#0087d2",audio:"pianoG"},{key:"5",color:"#6561ac",audio:"pianoA"},{key:"6",color:"#292526",audio:"pianoB"}]]},SaveMapData:[]},getters:{getMapData:e=>e.mapData,getBpm:e=>e.setting.bpm,getViewDegree:e=>e.setting.viewDegree,getMapSetting:e=>e.setting.mapSetting,getUser:e=>(console.log(e.user),e.user)},mutations:{saveMapData(e,t){e.mapData=t},setBpm(e,t){e.setting.bpm=t}},actions:{},modules:{}});const A=m("data-v-db0cbfe0");n("data-v-db0cbfe0");const R=o("div",{class:"image"},[o("img",{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"})],-1),N=o("h1",null,"S",-1),O=s("sdasdads"),F=s("ASD"),U=s("ASD"),z=s("SS"),G=s("7"),H=s("4:33"),Q=s("60%"),X=s("1560");c();const Y=A(((i,s,l,r,d,n)=>{const c=e("el-descriptions-item"),m=e("el-descriptions"),u=e("el-card");return t(),a(u,{class:"music_card",shadow:"hover","body-style":{padding:"0px"}},{default:A((()=>[R,o(m,{class:"info",title:"歌曲名稱",column:1},{extra:A((()=>[N])),default:A((()=>[o(c,{label:"作者"},{default:A((()=>[O])),_:1}),o(c,{label:"原曲"},{default:A((()=>[F])),_:1}),o(c,{label:"原曲頻道"},{default:A((()=>[U])),_:1}),o(c,{label:"難度"},{default:A((()=>[z])),_:1}),o(c,{label:"鍵位"},{default:A((()=>[G])),_:1}),o(c,{label:"長度"},{default:A((()=>[H])),_:1}),o(c,{label:"滿意度"},{default:A((()=>[Q])),_:1}),o(c,{label:"遊玩數"},{default:A((()=>[X])),_:1})])),_:1})])),_:1})}));const q={data:()=>({aa:"asd"})};q.render=Y,q.__scopeId="data-v-db0cbfe0";const W=m("data-v-093b70aa");n("data-v-093b70aa");const J={id:"demoboard"},K={class:"toolBar"},Z=s("Play"),ee=s("Pause"),te={class:"player"},ae=o("div",{id:"player"},null,-1),oe={class:"full-screen"};c();const ie=W(((i,l,r,d,n,c)=>{const m=e("el-slider"),b=e("el-button"),f=e("game_slider"),v=u("loading");return t(),a("div",J,[p(o("div",K,[o(m,{class:"slider",modelValue:n.viewDegree,"onUpdate:modelValue":l[1]||(l[1]=e=>n.viewDegree=e),vertical:"",height:"10vh",max:80},null,8,["modelValue"]),o(b,{onClick:l[2]||(l[2]=e=>c.gameStart()),icon:"el-icon-video-play",round:"",type:"primary",disabled:1==n.playerState},{default:W((()=>[Z])),_:1},8,["disabled"]),o(b,{onClick:l[3]||(l[3]=e=>c.gamePause()),icon:"el-icon-video-pause",round:"",type:"success",disabled:1!=n.playerState},{default:W((()=>[ee])),_:1},8,["disabled"]),o("p",null,h(n.score),1)],512),[[v,n.loading]]),o("div",{class:"row",style:c.demoboardStyle()},[p(o("div",te,[ae],512),[[v,n.loading]]),(t(!0),a(y,null,g(r.music_data.map_data,((e,i)=>(t(),a("div",oe,[o("div",{class:"screen",id:"S"+e.key},[(t(!0),a(y,null,g(e.timeStamp,((o,i)=>(t(),a(f,{onClick:l[4]||(l[4]=e=>c.destroy()),class:e.key,color:e.color,bornTime:o,currentTime:n.currentTime,bpm:c.getBpm},null,8,["class","color","bornTime","currentTime","bpm"])))),256))],8,["id"]),o(b,{class:"button",style:c.getButtonStyle(e.color),size:"medium",onClick:t=>c.hit(e.key,e.color,e.audio),id:"B"+e.key},{default:W((()=>[s(h(e.key),1)])),_:2},1032,["style","onClick","id"])])))),256))],4)])}));const se={props:{music_data:Object},data:()=>({loading:!0,viewDegree:0,currentTime:null,choiceTime:null,player:null,score:0,combo:0,maxCombo:0,lifeTimer:null,playerState:0}),computed:{getMapData(){return this.$store.getters.getMapData},getBpm(){return this.$store.getters.getBpm},getviewDegree(){return this.$store.getters.getviewDegree},judgeLine(){return 1===this.getBpm?[80,79,82,75,85,70]:1.5===this.getBpm?[80.5,78.5,83,74,85,68]:2===this.getBpm?[81,78,84,73,89,66]:.5===this.getBpm?[79.8,79.2,82,76,84,72]:.25===this.getBpm?[79.6,79.4,81,78,83,75]:void 0}},methods:{gameStart(){this.player.playVideo(),this.currentTime=this.player.getCurrentTime(),this.lifeTimer=setInterval((()=>{1===this.playerState&&(this.currentTime+=.015)}),15)},gamePause(){2!==this.playerState&&(this.player.pauseVideo(),this.currentTime=this.player.getCurrentTime(),console.log("pase"+this.currentTime),clearInterval(this.lifeTimer))},demoboardStyle(){return{transform:`\n        rotateX(${this.viewDegree}deg)\n        scale(${1-this.viewDegree/170})`}},getButtonStyle:e=>({background:e}),hit(e,t,a){const o=document.getElementsByClassName(e);let i=new Audio;i.src="./audio/"+a+".mp3",i.play(),o.length>0&&(this.appendEffect(e,o[0].style.top,t),o[0].click())},judge(e){var t=parseInt(e),a="";return this.judgeLine[0]>=t&&t>=this.judgeLine[1]?(this.score+=100,this.combo++,a="perfect"):this.judgeLine[2]>=t&&t>=this.judgeLine[0]||this.judgeLine[1]>=t&&t>=this.judgeLine[3]?(this.score+=30,this.combo++,a="excellent"):this.judgeLine[4]>=t&&t>=this.judgeLine[2]||this.judgeLine[3]>=t&&t>=this.judgeLine[5]?(this.score+=10,this.combo++,a="good"):(this.combo=0,a="miss"),this.combo>10&&this.combo<=30?this.score+=5:this.combo>30&&this.combo<=50?this.score+=10:this.combo>50&&this.combo<=100?this.score+=25:this.combo>100&&this.combo<=200?this.score+=35:this.combo>200&&(this.score+=50),this.combo>this.maxCombo&&(this.maxCombo=this.combo),a},appendEffect(e,t,a){const o=document.getElementById("S"+e),i=document.createElement("div");let s=this.judge(t);i.appendChild(document.createTextNode(`${s}`)),o.appendChild(i),"perfect"===s?i.classList.add("perfectEffect"):"excellent"===s?i.classList.add("excellentEffect"):"good"===s?i.classList.add("goodEffect"):i.classList.add("effect"),i.style.top=t,i.style.background=a},destroy(){this.$emit("destroy")},onPlayerReady(e){this.loading=!1,this.player.setPlaybackQuality("medium")},onPlayerStateChange(e){this.playerState=e.data,console.log(this.playerState)}},mounted(){this.viewDegree=this.getViewDegree,this.player=new YT.Player("player",{videoId:this.music_data.youtube_id,width:"100%",height:"100%",playerVars:{loop:1,rel:0},events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}})},created(){const e=this;document.onkeydown=function(t){e.music_data.map_data.map((e=>{if(e.key.toLowerCase()===t.key.toLowerCase()){const t=document.getElementById("B"+e.key);t.click(),t.classList.add("show"),setTimeout((()=>{t.classList.remove("show")}),300)}}))}}};se.render=ie,se.__scopeId="data-v-093b70aa";const le=m("data-v-3abb2d23");n("data-v-3abb2d23");const re={id:"playboard"},de={class:"toolBar"},ne=s("Play"),ce=s("Pause"),me={class:"player"},ue=o("div",{id:"player"},null,-1),pe={class:"full-screen"};c();const he=le(((i,l,r,d,n,c)=>{const m=e("el-slider"),b=e("el-button"),f=e("game_slider"),v=u("loading");return t(),a("div",re,[p(o("div",de,[o(m,{class:"slider",modelValue:n.viewDegree,"onUpdate:modelValue":l[1]||(l[1]=e=>n.viewDegree=e),vertical:"",height:"10vh",max:80},null,8,["modelValue"]),o(b,{onClick:l[2]||(l[2]=e=>c.gameStart()),icon:"el-icon-video-play",round:"",type:"primary",disabled:1==n.playerState},{default:le((()=>[ne])),_:1},8,["disabled"]),o(b,{onClick:l[3]||(l[3]=e=>c.gamePause()),icon:"el-icon-video-pause",round:"",type:"success",disabled:1!=n.playerState},{default:le((()=>[ce])),_:1},8,["disabled"]),o("p",null,h(n.score),1)],512),[[v,n.loading]]),o("div",{class:"row",style:c.playBoardStyle()},[p(o("div",me,[ue],512),[[v,n.loading]]),(t(!0),a(y,null,g(r.music_data.map_data,((e,i)=>(t(),a("div",pe,[o("div",{class:"screen",id:"S"+e.key},[(t(!0),a(y,null,g(e.timeStamp,((o,i)=>(t(),a(f,{onClick:l[4]||(l[4]=e=>c.destroy()),class:e.key,color:e.color,bornTime:o,currentTime:n.currentTime,bpm:c.getBpm},null,8,["class","color","bornTime","currentTime","bpm"])))),256))],8,["id"]),o(b,{class:"button",style:c.getButtonStyle(e.color),size:"medium",onClick:t=>c.hit(e.key,e.color,e.audio),id:"B"+e.key},{default:le((()=>[s(h(e.key),1)])),_:2},1032,["style","onClick","id"])])))),256))],4)])}));const ye={props:{music_data:Object},data:()=>({loading:!0,viewDegree:0,currentTime:null,choiceTime:null,player:null,score:0,combo:0,maxCombo:0,lifeTimer:null,playerState:0}),computed:{getMapData(){return this.$store.getters.getMapData},getBpm(){return this.$store.getters.getBpm},getviewDegree(){return this.$store.getters.getviewDegree},judgeLine(){return 1===this.getBpm?[80,79,82,75,85,70]:1.5===this.getBpm?[80.5,78.5,83,74,85,68]:2===this.getBpm?[81,78,84,73,89,66]:.5===this.getBpm?[79.8,79.2,82,76,84,72]:.25===this.getBpm?[79.6,79.4,81,78,83,75]:void 0}},methods:{gameStart(){this.player.playVideo(),this.currentTime=this.player.getCurrentTime(),this.lifeTimer=setInterval((()=>{1===this.playerState&&(this.currentTime+=.015)}),15)},gamePause(){2!==this.playerState&&(this.player.pauseVideo(),this.currentTime=this.player.getCurrentTime(),console.log("pase"+this.currentTime),clearInterval(this.lifeTimer))},playBoardStyle(){return{transform:`\n        rotateX(${this.viewDegree}deg)\n        scale(${1-this.viewDegree/170})`}},getButtonStyle:e=>({background:e}),hit(e,t,a){const o=document.getElementsByClassName(e);let i=new Audio;i.src="./audio/"+a+".mp3",i.play(),o.length>0&&(this.appendEffect(e,o[0].style.top,t),o[0].click())},judge(e){var t=parseInt(e),a="";return this.judgeLine[0]>=t&&t>=this.judgeLine[1]?(this.score+=100,this.combo++,a="perfect"):this.judgeLine[2]>=t&&t>=this.judgeLine[0]||this.judgeLine[1]>=t&&t>=this.judgeLine[3]?(this.score+=30,this.combo++,a="excellent"):this.judgeLine[4]>=t&&t>=this.judgeLine[2]||this.judgeLine[3]>=t&&t>=this.judgeLine[5]?(this.score+=10,this.combo++,a="good"):(this.combo=0,a="miss"),this.combo>10&&this.combo<=30?this.score+=5:this.combo>30&&this.combo<=50?this.score+=10:this.combo>50&&this.combo<=100?this.score+=25:this.combo>100&&this.combo<=200?this.score+=35:this.combo>200&&(this.score+=50),this.combo>this.maxCombo&&(this.maxCombo=this.combo),a},appendEffect(e,t,a){const o=document.getElementById("S"+e),i=document.createElement("div");let s=this.judge(t);i.appendChild(document.createTextNode(`${s}`)),o.appendChild(i),"perfect"===s?i.classList.add("perfectEffect"):"excellent"===s?i.classList.add("excellentEffect"):"good"===s?i.classList.add("goodEffect"):i.classList.add("effect"),i.style.top=t,i.style.background=a},destroy(){this.$emit("destroy")},onPlayerReady(e){this.loading=!1,this.player.setPlaybackQuality("medium")},onPlayerStateChange(e){this.playerState=e.data,console.log(this.playerState)}},mounted(){this.viewDegree=this.getViewDegree,this.player=new YT.Player("player",{videoId:this.music_data.youtube_id,width:"100%",height:"100%",playerVars:{loop:1,rel:0},events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}})},created(){const e=this;document.onkeydown=function(t){e.music_data.map_data.map((e=>{if(e.key.toLowerCase()===t.key.toLowerCase()){const t=document.getElementById("B"+e.key);t.click(),t.classList.add("show"),setTimeout((()=>{t.classList.remove("show")}),300)}}))}}};ye.render=he,ye.__scopeId="data-v-3abb2d23";const ge=m("data-v-60183a94");n("data-v-60183a94");const be={id:"editboard"},fe={class:"toolBar"},ve=s("Play"),ke=s("Pause"),_e=s("Save"),Se={class:"player"},Te={id:"player"},we={class:"full-screen"};c();const Ce=ge(((i,l,r,d,n,c)=>{const m=e("el-slider"),b=e("el-button"),f=u("loading");return t(),a("div",be,[p(o("div",fe,[o(m,{class:"slider",modelValue:n.viewDegree,"onUpdate:modelValue":l[1]||(l[1]=e=>n.viewDegree=e),vertical:"",height:"10vh",max:80},null,8,["modelValue"]),o(b,{onClick:l[2]||(l[2]=e=>c.gameStart()),icon:"el-icon-video-play",round:"",type:"primary",disabled:1==n.playerState},{default:ge((()=>[ve])),_:1},8,["disabled"]),o(b,{onClick:l[3]||(l[3]=e=>c.gamePause()),icon:"el-icon-video-pause",round:"",type:"success",disabled:1!=n.playerState},{default:ge((()=>[ke])),_:1},8,["disabled"]),o(b,{onClick:l[4]||(l[4]=e=>c.saveMapData()),plain:"",icon:"el-icon-finished",round:"",type:"warning"},{default:ge((()=>[_e])),_:1})],512),[[f,n.loading]]),o(m,{modelValue:n.currentTime,"onUpdate:modelValue":l[5]||(l[5]=e=>n.currentTime=e),height:"300",max:r.music_data.duration,"show-input":"",onInput:l[6]||(l[6]=e=>c.seekTo()),onChange:l[7]||(l[7]=e=>c.seekToConfirm())},null,8,["modelValue","max"]),o("div",{class:"row",style:c.playBoardStyle()},[o("div",Se,[p(o("div",Te,null,512),[[f,n.loading]])]),(t(!0),a(y,null,g(c.getMapData,((e,i)=>(t(),a("div",we,[o("div",{class:"screen",id:"S"+e.key},null,8,["id"]),o(b,{class:"button",style:c.getButtonStyle(e.color),size:"medium",onClick:t=>c.hit(e.key,e.color),id:"B"+e.key},{default:ge((()=>[s(h(e.key),1)])),_:2},1032,["style","onClick","id"])])))),256))],4)])}));const De={props:{music_data:Object},data:()=>({loading:!0,viewDegree:0,currentTime:null,choiceTime:null,player:null,score:0,combo:0,lifeTimer:null,playerState:0,newMap:[]}),computed:{getMapData(){return this.$store.getters.getMapData},getviewDegree(){return this.$store.getters.getviewDegree}},methods:{gameStart(){console.log(this.player),this.player.playVideo(),this.lifeTimer=setInterval((()=>{1===this.playerState&&(this.currentTime+=.05)}),50)},gamePause(){this.player.pauseVideo(),clearInterval(this.lifeTimer)},playBoardStyle(){return{transform:`\n        rotateX(${this.viewDegree}deg)\n        scale(${1-this.viewDegree/170})`}},getButtonStyle:e=>({background:e}),hit(e,t){1===this.playerState&&(this.appendEffect(e,t),this.judge(),this.editMap(e,this.player.getCurrentTime()))},editMap(e,t){this.getAMapData(e).timeStamp.push(t)},getAMapData(e){return this.newMap.find((t=>t.key===e))},initMap(){this.getMapData.map((e=>{var t={key:e.key,color:e.color,timeStamp:[]};this.newMap.push(t)}))},saveMapData(){this.newMap.forEach((e=>{e.timeStamp.sort()})),this.$store.commit("saveMapData",this.newMap),this.$notify({title:"Map Data",message:b("i",{style:"color: teal"},"已儲存資料")})},judge(){this.score+=100,this.combo++,this.combo>10&&this.combo<=30?this.score+=5:this.combo>30&&this.combo<=50?this.score+=10:this.combo>50&&this.combo<=100?this.score+=25:this.combo>100&&this.combo<=200?this.score+=35:this.combo>200&&(this.score+=50)},appendEffect(e,t){const a=document.getElementById("S"+e),o=document.createElement("div");o.appendChild(document.createTextNode("perfect")),o.classList.add("perfectEffect"),o.style.top="80%",o.style.background=t,a.appendChild(o)},seekTo(){1!==this.playerState&&this.player.seekTo(this.currentTime)},seekToConfirm(){this.player.seekTo(this.currentTime)},onPlayerReady(e){this.loading=!1,this.player.setPlaybackQuality("medium")},onPlayerStateChange(e){this.playerState=e.data}},mounted(){this.player=new YT.Player("player",{videoId:this.music_data.id,width:"100%",height:"100%",playerVars:{loop:1,rel:0},events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}}),this.initMap()},created(){const e=this;document.onkeydown=function(t){e.music_data.map_data.map((e=>{if(e.key.toLowerCase()===t.key.toLowerCase()){console.log(e.key);const t=document.getElementById("B"+e.key);t.click(),t.classList.add("show"),setTimeout((()=>{t.classList.remove("show")}),300)}}))}}};De.render=Ce,De.__scopeId="data-v-60183a94";const Le=m("data-v-19c2fdd9")(((e,o,i,s,l,r)=>r.exist?(t(),a("div",{key:0,class:"game_slider",style:r.gameSliderStyle,onClick:o[1]||(o[1]=e=>r.destroy())},null,4)):f("",!0)));const Be={data:()=>({break:!1}),props:{bpm:Number,color:String,bornTime:Number,currentTime:Number},computed:{gameSliderStyle(){return{top:this.top+"%",background:this.color}},top(){return this.sneak-this.bornTime>0?75*(this.sneak-this.bornTime)*this.bpm:0},sneak(){return 1===this.bpm?this.currentTime+1.15:1.5===this.bpm?this.currentTime+.83:2===this.bpm?this.currentTime+.56:.5===this.bpm?this.currentTime+2.1:.25===this.bpm?this.currentTime+4.35:void 0},exist(){return this.top>0&&this.top<100&&!1===this.break}},methods:{destroy(){this.break=!0}}};Be.render=Le,Be.__scopeId="data-v-19c2fdd9";const Ee=v(P);Ee.use(M),Ee.use($),Ee.use(k),Ee.use(_),Ee.use(S,T),Ee.component("music_card",q),Ee.component("demoboard",se),Ee.component("playboard",ye),Ee.component("editboard",De),Ee.component("game_slider",Be),Ee.mount("#app");
