import{r as e,o as t,c as s,a,w as o,b as l,d as r,e as i,f as d,p as n,g as c,h as m,F as u,i as h,j as p,t as y,k as b,l as f}from"./vendor.7ca2fade.js";const g={id:"App"},v={id:"Nav"},_=l("Home"),S=l("Edit");const k={};let T;k.render=function(l,r){const i=e("el-menu-item"),d=e("el-menu"),n=e("router-view");return t(),s("div",g,[a("div",v,[a(d,{class:"el-menu-demo",mode:"horizontal",router:!0},{default:o((()=>[a(i,{index:"/"},{default:o((()=>[_])),_:1}),a(i,{index:"edit"},{default:o((()=>[S])),_:1})])),_:1})]),a(n)])};const w={},E=function(e,t){if(!t||0===t.length)return e();if(void 0===T){const e=document.createElement("link").relList;T=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`./${e}`)in w)return;w[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":T,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))},D=[{path:"/",name:"Home",component:()=>E((()=>import("./Home.a762eea4.js")),["assets/Home.a762eea4.js","assets/vendor.7ca2fade.js"])},{path:"/edit",name:"Edit",component:()=>E((()=>import("./Edit.a60f7e9f.js")),["assets/Edit.a60f7e9f.js","assets/Edit.ece48f9c.css","assets/vendor.7ca2fade.js"])}],I=r({history:i("#"),routes:D});var P=d({state:{name:"Gary",Age:27},mutations:{},actions:{},modules:{}});const C=m("data-v-db0cbfe0");n("data-v-db0cbfe0");const x=a("div",{class:"image"},[a("img",{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"})],-1),V=a("h1",null,"S",-1),B=l("sdasdads"),L=l("ASD"),j=l("ASD"),$=l("SS"),A=l("7"),N=l("4:33"),R=l("60%"),O=l("1560");c();const H=C(((o,l,r,i,d,n)=>{const c=e("el-descriptions-item"),m=e("el-descriptions"),u=e("el-card");return t(),s(u,{class:"music_card",shadow:"hover","body-style":{padding:"0px"}},{default:C((()=>[x,a(m,{class:"info",title:"歌曲名稱",column:1},{extra:C((()=>[V])),default:C((()=>[a(c,{label:"作者"},{default:C((()=>[B])),_:1}),a(c,{label:"原曲"},{default:C((()=>[L])),_:1}),a(c,{label:"原曲頻道"},{default:C((()=>[j])),_:1}),a(c,{label:"難度"},{default:C((()=>[$])),_:1}),a(c,{label:"鍵位"},{default:C((()=>[A])),_:1}),a(c,{label:"長度"},{default:C((()=>[N])),_:1}),a(c,{label:"滿意度"},{default:C((()=>[R])),_:1}),a(c,{label:"遊玩數"},{default:C((()=>[O])),_:1})])),_:1})])),_:1})}));const z={data:()=>({aa:"asd"})};z.render=H,z.__scopeId="data-v-db0cbfe0";const Q=m("data-v-06065cee");n("data-v-06065cee");const U={id:"playboard"},q=l("start"),F=l("pause"),G=a("div",{class:"player"},[a("div",{id:"player"})],-1),W={class:"full-screen"};c();const X=Q(((o,r,i,d,n,c)=>{const m=e("el-slider"),b=e("el-button"),f=e("game_slider");return t(),s("div",U,[a(m,{class:"slider",modelValue:n.viewDegree,"onUpdate:modelValue":r[1]||(r[1]=e=>n.viewDegree=e),vertical:"",height:"10vh",max:80},null,8,["modelValue"]),a(b,{onClick:r[2]||(r[2]=e=>c.gameStart())},{default:Q((()=>[q])),_:1}),a(b,{onClick:r[3]||(r[3]=e=>c.gamePause())},{default:Q((()=>[F])),_:1}),a(m,{modelValue:n.currentProgress,"onUpdate:modelValue":r[4]||(r[4]=e=>n.currentProgress=e),height:"300",max:n.playerEnd},null,8,["modelValue","max"]),a("div",{class:"row",style:c.playBoardStyle()},[G,(t(!0),s(u,null,h(i.musicData.mapData,((e,o)=>(t(),s("div",W,[a("div",{class:"screen",id:"S"+e.key},[n.start?(t(!0),s(u,{key:0},h(e.timeStamp,((a,o)=>(t(),s(f,{onClick:r[5]||(r[5]=e=>c.destroy()),class:e.key,color:e.color,born:a,playState:n.playState,currentTime:n.currentTime},null,8,["class","color","born","playState","currentTime"])))),256)):p("",!0)],8,["id"]),a(b,{class:"button shadow",style:c.getShadowStyle(e.color),size:"medium",onClick:t=>c.hit(e.key,e.color),id:"B"+e.key},{default:Q((()=>[l(y(e.key),1)])),_:2},1032,["style","onClick","id"])])))),256))],4)])}));const Y={props:{musicData:Object},data:()=>({playState:0,start:!1,viewDegree:0,currentProgress:0,currentTime:null,playerEnd:200,player:null,score:0,combo:0,maxCombo:0}),computed:{},methods:{gameStart(){this.start=!0,this.playState=1,this.player.playVideo()},gamePause(){this.playState=2,this.player.pauseVideo()},playBoardStyle(){return{transform:`\n        rotateX(${this.viewDegree}deg)\n        scale(${1-this.viewDegree/170})`}},getShadowStyle:e=>({background:e}),hit(e,t){const s=document.getElementsByClassName(e);s.length>0&&(this.appendEffect(e,s[0].style.top,t),s[0].click())},judge(e){var t=parseInt(e),s="";return 80===t?(this.score+=100,this.combo++,s="perfect"):85>t&&t>75&&80!=t?(this.score+=30,this.combo++,s="excellent"):90>=t&&t>=85||75>=t&&t>=70?(this.score+=10,this.combo++,s="good"):(this.combo=0,s="miss"),this.combo>10&&this.combo<=30?this.score+=5:this.combo>30&&this.combo<=50?this.score+=10:this.combo>50&&this.combo<=100?this.score+=25:this.combo>100&&this.combo<=200?this.score+=35:this.combo>200&&(this.score+=50),this.combo>this.maxCombo&&(this.maxCombo=this.combo),s},appendEffect(e,t,s){const a=document.getElementById("S"+e),o=document.createElement("div");o.appendChild(document.createTextNode(`${this.judge(t)}`)),o.classList.add("effect"),o.style.top=t,o.style.background=s,a.appendChild(o),setTimeout((()=>{o.remove()}),300)},destroy(){this.$emit("destroy")},onPlayerReady(e){e.target.loadVideoById({videoId:this.musicData.id,startSeconds:0,endSeconds:null,suggestedQuality:"medium"}),this.player.setPlaybackQuality("medium"),this.currentTime=this.player.getCurrentTime()}},mounted(){this.player=new YT.Player("player",{videoId:this.musicData.id,width:"100%",height:"100%",playerVars:{loop:1,rel:0},events:{onReady:this.onPlayerReady}})},created(){const e=this;document.onkeydown=function(t){e.musicData.mapData.map((e=>{if(e.key===t.key){const t=document.getElementById("B"+e.key);t.click(),t.classList.add("show"),setTimeout((()=>{t.classList.remove("show")}),300)}}))}},watch:{currentProgress(){this.player.seekTo(this.currentProgress)},currentTime(e){console.log(e)}}};Y.render=X,Y.__scopeId="data-v-06065cee";const J=m("data-v-2de0a187")(((e,a,o,l,r,i)=>r.life<100&&r.start&&0!==o.born?(t(),s("div",{key:0,class:"game_slider",style:i.gameSliderStyle,onClick:a[1]||(a[1]=e=>i.destroy())},null,4)):p("",!0)));const K={data:()=>({bpm:20,life:0,start:!1,pause:!1,lifeTimer:null,slideTimer:null}),props:{color:String,born:Number,playState:Number,currentTime:Number},computed:{gameSliderStyle(){if(this.life>0)return{top:this.life+"%",background:this.color}}},methods:{destroy(){console.log(this.playState),this.start=!1},play(){0===this.life?this.lifeTimer=setTimeout((()=>{this.slideTimer=setInterval((()=>{this.life+=1}),this.bpm),this.start=!0}),this.born-this.currentTime):(this.slideTimer=setInterval((()=>{this.life+=1}),this.bpm),this.start=!0)}},mounted(){this.play()},watch:{playState(e){2===e?(clearInterval(this.lifeTimer),clearInterval(this.slideTimer)):1===e&&this.play()}}};K.render=J,K.__scopeId="data-v-2de0a187";const M=b(k);M.use(I),M.use(P),M.use(f),M.component("music_card",z),M.component("playboard",Y),M.component("game_slider",K),M.mount("#app");
